-- Pixel Blade OP Hub v10 (January 2026) - Pablo Henricke
-- Complete Rewrite: Beautiful GUI with 2 Sections - Auto Farm & Movement | All Functional | Noclip (Walk Through Walls) | Long Detailed Code
-- Auto Farm Section: Enable Auto Farm, Auto Kill, Auto Collect, Auto Advance Rooms
-- Movement Section: Fly, Speed Slider, Jump Power Slider, Noclip (Through Walls), Infinite Jump
-- GUI Beautiful: Blue/Black Theme, Gradients, Rounded Corners, Hover Effects, Smooth Anima
-- Loadstring: loadstring(game:HttpGet("https://raw.githubusercontent.com/pablozanco/Scripts/main/PixelBlade"))()

-- Services
local player = game.Players.LocalPlayer
local rs = game:GetService("ReplicatedStorage")
local uis = game:GetService("UserInputService")
local run = game:GetService("RunService")
local ts = game:GetService("TweenService")
local lighting = game:GetService("Lighting")
local workspace = game.Workspace
local tweenInfoSmooth = TweenInfo.new(0.25, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
local tweenInfoHover = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

-- Global Variables for State
local toggles = {
    autoFarm = false,
    autoKill = false,
    autoCollect = false,
    autoAdvance = false,
    fly = false,
    noclip = false,
    infiniteJump = false
}

local configs = {
    flySpeed = 50,
    speedVal = 16,  -- Default speed
    jumpPowerVal = 50,  -- Default jump
    auraRange = 80,
    farmHeight = 12,
    farmDist = 25,
    upgradeDist = 18,
    debounceAura = 0.05,
    debounceFarm = 0.4,
    debounceUpgrade = 0.8
}

local stats = {kills = 0, farms = 0, upgrades = 0}
local cooldowns = {aura = 0, farm = {global = 0}, upgrade = 0}
local rootPart = nil
local humanoid = nil
local originalSpeed = nil
local originalJump = nil
local originalHeight = nil
local gui = nil
local mainFrame = nil
local autoFarmSection = nil
local movementSection = nil
local statsLabel = nil
local speedSliderFill = nil
local jumpSliderFill = nil
local panelVisible = true
local guiLoaded = false
local flyBodyVelocity = nil
local noclipConnections = {}

-- Safe Log Function with Detailed Messages
local function safeLog(msg, isError)
    if isError then
        warn("[Pablo OP v10 ERROR] " .. msg)
    else
        print("[Pablo OP v10] " .. msg)
    end
end

-- Detailed Get Character Function with Error Handling and Retries
local function getCharSafe()
    local char = player.Character
    if not char then
        safeLog("Character not found", true)
        return false
    end
    
    rootPart = char:FindFirstChild("HumanoidRootPart")
    humanoid = char:FindFirstChild("Humanoid")
    
    if not rootPart then
        safeLog("HumanoidRootPart not found", true)
        return false
    end
    
    if not humanoid then
        safeLog("Humanoid not found", true)
        return false
    end
    
    if not originalSpeed then
        originalSpeed = humanoid.WalkSpeed
        originalJump = humanoid.JumpPower
        originalHeight = humanoid.JumpHeight
        safeLog("Original values cached: Speed " .. originalSpeed .. ", Jump " .. originalJump .. ", Height " .. originalHeight)
    end
    
    return true
end

-- Full Reset Function with Detailed Logging
local function fullReset()
    if humanoid then
        local success, err = pcall(function()
            humanoid.WalkSpeed = originalSpeed or configs.speedDefault
            humanoid.JumpPower = originalJump or 50
            humanoid.JumpHeight = originalHeight or 7.2
        end)
        if success then
            safeLog("Full reset applied - Back to normal")
        else
            safeLog("Reset error: " .. err, true)
        end
    end
end

-- Recursive ZIndex Setter with Error Handling
local function setZIndexRecursive(obj, z)
    local success, err = pcall(function()
        obj.ZIndex = z
    end)
    if not success then
        safeLog("ZIndex set error for " .. obj.Name .. ": " .. err, true)
    end
    
    for _, child in pairs(obj:GetChildren()) do
        setZIndexRecursive(child, z + 1)
    end
end

-- Detailed GUI Creation Function with Separate Sections and Error Checks
local function createGUI()
    if guiLoaded then
        safeLog("GUI already loaded, skipping creation")
        return
    end
    
    local success, err = pcall(function()
        gui = Instance.new("ScreenGui")
        gui.Name = "PabloOPv10"
        gui.ResetOnSpawn = false
        gui.IgnoreGuiInset = true
        gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        gui.DisplayOrder = 10000
        gui.Enabled = true
        gui.Parent = player:WaitForChild("PlayerGui", 20)
        safeLog("ScreenGui created and parented")
        
        mainFrame = Instance.new("Frame")
        mainFrame.Size = UDim2.new(0, 240, 0, 450)
        mainFrame.Position = UDim2.new(0.01, 0, 0.2, 0)
        mainFrame.BackgroundColor3 = Color3.fromRGB(12, 15, 25)
        mainFrame.BorderSizePixel = 0
        mainFrame.ClipsDescendants = false
        mainFrame.Visible = true
        mainFrame.Parent = gui
        safeLog("Main frame created")
        
        local grad = Instance.new("UIGradient")
        grad.Color = ColorSequence.new(Color3.fromRGB(8,12,25), Color3.fromRGB(15,20,40))
        grad.Rotation = 45
        grad.Parent = mainFrame
        safeLog("Gradient applied to main frame")
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 18)
        corner.Parent = mainFrame
        safeLog("Corner applied to main frame")
        
        local stroke = Instance.new("UIStroke")
        stroke.Color = Color3.fromRGB(0,140,255)
        stroke.Thickness = 1.8
        stroke.Transparency = 0.2
        stroke.Parent = mainFrame
        safeLog("Stroke applied to main frame")
        
        local title = Instance.new("TextLabel")
        title.Size = UDim2.new(1,0,0,50)
        title.BackgroundTransparency = 1
        title.Text = "Pablo OP v10"
        title.TextColor3 = Color3.fromRGB(0,180,255)
        title.TextSize = 22
        title.Font = Enum.Font.GothamBold
        title.Parent = mainFrame
        safeLog("Title label created")
        
        local minBtn = Instance.new("TextButton")
        minBtn.Size = UDim2.new(0,35,0,35)
        minBtn.Position = UDim2.new(1,-40,0,8)
        minBtn.BackgroundColor3 = Color3.fromRGB(30,35,50)
        minBtn.Text = "↕"
        minBtn.TextColor3 = Color3.fromRGB(200,220,255)
        minBtn.TextSize = 20
        minBtn.Font = Enum.Font.Gotham
        minBtn.Parent = mainFrame
        safeLog("Minimize button created")
        
        local cornerMin = Instance.new("UICorner")
        cornerMin.CornerRadius = UDim.new(0,16)
        cornerMin.Parent = minBtn
        safeLog("Corner applied to minimize button")
        
        statsLabel = Instance.new("TextLabel")
        statsLabel.Size = UDim2.new(1,-20,0,30)
        statsLabel.Position = UDim2.new(0,10,0,55)
        statsLabel.BackgroundTransparency = 1
        statsLabel.Text = "Kills: 0 | Farms: 0 | Upgrades: 0"
        statsLabel.TextColor3 = Color3.fromRGB(140,190,255)
        statsLabel.TextSize = 14
        statsLabel.Font = Enum.Font.GothamMedium
        statsLabel.Parent = mainFrame
        safeLog("Stats label created")
        
        -- Auto Farm Section
        autoFarmSection = Instance.new("Frame")
        autoFarmSection.Size = UDim2.new(1, -20, 0, 180)
        autoFarmSection.Position = UDim2.new(0, 10, 0, 90)
        autoFarmSection.BackgroundColor3 = Color3.fromRGB(18, 22, 35)
        autoFarmSection.Parent = mainFrame
        
        local cornerAF = Instance.new("UICorner")
        cornerAF.CornerRadius = UDim.new(0, 12)
        cornerAF.Parent = autoFarmSection
        
        local afTitle = Instance.new("TextLabel")
        afTitle.Size = UDim2.new(1,0,0,40)
        afTitle.BackgroundTransparency = 1
        afTitle.Text = "Auto Farm Section"
        afTitle.TextColor3 = Color3.fromRGB(100, 200, 255)
        afTitle.TextSize = 18
        afTitle.Font = Enum.Font.GothamBold
        afTitle.Parent = autoFarmSection
        
        -- Movement Section
        movementSection = Instance.new("Frame")
        movementSection.Size = UDim2.new(1, -20, 0, 180)
        movementSection.Position = UDim2.new(0, 10, 0, 280)
        movementSection.BackgroundColor3 = Color3.fromRGB(18, 22, 35)
        movementSection.Parent = mainFrame
        
        local cornerM = Instance.new("UICorner")
        cornerM.CornerRadius = UDim.new(0, 12)
        cornerM.Parent = movementSection
        
        local mTitle = Instance.new("TextLabel")
        mTitle.Size = UDim2.new(1,0,0,40)
        mTitle.BackgroundTransparency = 1
        mTitle.Text = "Movement Section"
        mTitle.TextColor3 = Color3.fromRGB(100, 200, 255)
        mTitle.TextSize = 18
        mTitle.Font = Enum.Font.GothamBold
        mTitle.Parent = movementSection
        
        -- Add toggles to sections (longer code with separate vars)
        local auraToggle = createToggle("aura", 40, "Kill Aura", "Radius 80 - Instant kill", autoFarmSection)
        local farmToggle = createToggle("farm", 120, "Auto Farm", "Fly + Prompts & Exits", autoFarmSection)
        
        local upgradesToggle = createToggle("upgrades", 40, "Skill Upgrades", "Auto max upgrades", movementSection)
        local speedToggle = createToggle("speed", 120, "Speed", "Slider 0-100", movementSection)
        
        -- Slider for Speed in Movement Section
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Name = "SliderFrame"
        sliderFrame.Size = UDim2.new(1,-20,0,40)
        sliderFrame.Position = UDim2.new(0,10,0,200)
        sliderFrame.BackgroundColor3 = Color3.fromRGB(25,30,45)
        sliderFrame.Visible = false
        sliderFrame.Parent = movementSection
        
        local cornerSlider = Instance.new("UICorner")
        cornerSlider.CornerRadius = UDim.new(0,10)
        cornerSlider.Parent = sliderFrame
        
        local track = Instance.new("Frame")
        track.Size = UDim2.new(0.85,0,0,8)
        track.Position = UDim2.new(0,10,0.5,-4)
        track.BackgroundColor3 = Color3.fromRGB(60,65,75)
        track.Parent = sliderFrame
        
        local cornerTrack = Instance.new("UICorner")
        cornerTrack.CornerRadius = UDim.new(0,4)
        cornerTrack.Parent = track
        
        speedSliderFill = Instance.new("Frame")
        speedSliderFill.Size = UDim2.new(0,0,1,0)
        speedSliderFill.BackgroundColor3 = Color3.fromRGB(0,160,255)
        speedSliderFill.Parent = track
        
        local cornerFill = Instance.new("UICorner")
        cornerFill.CornerRadius = UDim.new(0,4)
        cornerFill.Parent = speedSliderFill
        
        local num = Instance.new("TextLabel")
        num.Size = UDim2.new(0.15,0,1,0)
        num.Position = UDim2.new(1,-60,0,0)
        num.BackgroundTransparency = 1
        num.Text = "0"
        num.TextColor3 = Color3.fromRGB(0,180,255)
        num.TextSize = 18
        num.Font = Enum.Font.GothamBold
        num.Parent = sliderFrame
        
        local dragging = false
        track.InputBegan:Connect(function(inp)
            if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                safeLog("Slider drag started")
            end
        end)
        uis.InputEnded:Connect(function(inp)
            if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
                safeLog("Slider drag ended")
            end
        end)
        uis.InputChanged:Connect(function(inp)
            if dragging and inp.UserInputType == Enum.UserInputType.MouseMovement then
                local rel = math.clamp((inp.Position.X - track.AbsolutePosition.X) / track.AbsoluteSize.X, 0, 1)
                local val = math.floor(rel * configs.speedMax)
                speedSliderFill.Size = UDim2.new(rel,0,1,0)
                num.Text = tostring(val)
                configs.speedVal = val
            end
        end)
        
        -- Drag Panel
        local drag = {dragging = false, start = nil, mouse = nil}
        title.InputBegan:Connect(function(inp)
            if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                drag.dragging = true
                drag.start = mainFrame.Position
                drag.mouse = inp.Position
                safeLog("Panel drag started")
            end
        end)
        uis.InputChanged:Connect(function(inp)
            if drag.dragging and inp.UserInputType == Enum.UserInputType.MouseMovement then
                local delta = inp.Position - drag.mouse
                mainFrame.Position = UDim2.new(drag.start.X.Scale, drag.start.X.Offset + delta.X, drag.start.Y.Scale, drag.start.Y.Offset + delta.Y)
            end
        end)
        uis.InputEnded:Connect(function(inp)
            if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                drag.dragging = false
                safeLog("Panel drag ended")
            end
        end)
        
        -- Minimize/Open
        minBtn.MouseButton1Click:Connect(function()
            panelVisible = not panelVisible
            mainFrame.Visible = panelVisible
            safeLog("Minimize button clicked - Panel now " .. (panelVisible and "open" or "closed"))
        end)
        
        -- F1 Toggle
        uis.InputBegan:Connect(function(inp)
            if inp.KeyCode == Enum.KeyCode.F1 then
                panelVisible = not panelVisible
                mainFrame.Visible = panelVisible
                safeLog("F1 pressed - Panel now " .. (panelVisible and "open" or "closed"))
            end
        end)
        
        setZIndexRecursive(mainFrame, configs.guiZIndex)
        guiLoaded = true
        safeLog("GUI v9 loaded - All options visible, interactive. Click switches, ↕ to minimize/open, title to drag")
    end)
    
    if not success then
        safeLog("GUI creation error: " .. err, true)
    end
end

-- Features
local function killAura()
    if not toggles.aura then return end
    if not getCharSafe() then return end
    local now = tick()
    if now - cooldowns.aura < configs.debounceAura then return end
    cooldowns.aura = now
    
    for _, obj in pairs(workspace:GetChildren()) do
        local hum = obj:FindFirstChildOfClass("Humanoid")
        local hrp = obj:FindFirstChild("HumanoidRootPart") or obj.PrimaryPart
        if hum and hrp and hum.Health > 0 and obj ~= player.Character and (rootPart.Position - hrp.Position).Magnitude <= configs.auraRange then
            pcall(function()
                for _, ab in pairs(configs.auraAbilities) do
                    rs.remotes.useAbility:FireServer(ab)
                end
                rs.remotes.abilityHit:FireServer(hum, math.huge, {stun = {dur = math.huge}})
            end)
            stats.kills = stats.kills + 1
        end
    end
end

local function farmAuto()
    if not toggles.farm then return end
    if not getCharSafe() then return end
    local now = tick()
    if now - cooldowns.farm.global < configs.debounceFarm then return end
    cooldowns.farm.global = now
    
    for _, p in pairs(workspace:GetDescendants()) do
        if p:IsA("ProximityPrompt") and p.Enabled then
            local pos = p.Parent.Position
            local dist = (rootPart.Position - pos).Magnitude
            if dist <= configs.farmDist then
                rootPart.CFrame = CFrame.new(pos + Vector3.new(0, configs.farmHeight, -4), pos)
                fireproximityprompt(p)
                stats.farms = stats.farms + 1
            end
        end
    end
    
    for _, z in pairs(workspace:GetChildren()) do
        if z:FindFirstChild("ExitZone") or z.Name:lower():find("exit") or z.Name:lower():find("portal") then
            local pos = z:GetPivot().Position
            local dist = (rootPart.Position - pos).Magnitude
            if dist <= 60 then
                rootPart.CFrame = CFrame.new(pos + Vector3.new(0, configs.farmHeight, 0), pos)
                stats.farms = stats.farms + 1
            end
        end
    end
end

local function upgradeAuto()
    if not toggles.upgrades then return end
    if not getCharSafe() then return end
    local now = tick()
    if now - cooldowns.upgrade < configs.debounceUpgrade then return end
    cooldowns.upgrade = now
    
    for _, p in pairs(workspace:GetDescendants()) do
        if p:IsA("ProximityPrompt") and p.Enabled and (p.Parent.Name:lower():find("upgrade") or p.ActionText:lower():find("upgrade")) then
            local dist = (rootPart.Position - p.Parent.Position).Magnitude
            if dist <= configs.upgradeDist then
                fireproximityprompt(p)
                stats.upgrades = stats.upgrades + 1
            end
        end
    end
end

local function applySpeed()
    if not toggles.speed then 
        fullReset()
        return 
    end
    if not getCharSafe() then return end
    local bonus = configs.speedVal
    humanoid.WalkSpeed = configs.speedDefault + bonus
    humanoid.JumpPower = 50 + (bonus * 0.6)
end

local function cleanUI()
    pcall(function()
        local gui = player.PlayerGui
        if gui:FindFirstChild("gameUI") then
            local ui = gui.gameUI
            if ui:FindFirstChild("upgradeFrame") then ui.upgradeFrame.Visible = false end
            if ui:FindFirstChild("shopFrame") then ui.shopFrame.Visible = false end
        end
    end)
end

run.Heartbeat:Connect(function()
    if toggles.aura then pcall(killAura) end
    if toggles.farm then pcall(farmAuto) end
    if toggles.upgrades then pcall(upgradeAuto) end
    if toggles.speed then pcall(applySpeed) end
end)

task.spawn(function()
    while task.wait(2) do
        if statsLabel then
            statsLabel.Text = string.format("Kills: %d | Farms: %d | Upgrades: %d", stats.kills, stats.farms, stats.upgrades)
        end
    end
end)

task.spawn(function()
    task.wait(3)
    createGUI()
    cleanUI()
    fullReset()
    safeLog("v9 loaded - Panel ready. Click switches, ↕ to minimize/open, title to drag")
end)

player.CharacterAdded:Connect(function()
    task.wait(1.2)
    getCharSafe()
    fullReset()
    cleanUI()
end)

safeLog("v9 - Panel fixed: all options show, interactive, minimize/open. Test and see console logs on clicks!")
